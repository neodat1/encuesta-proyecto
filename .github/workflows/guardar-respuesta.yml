name: Guardar Respuesta

on:
  push:
    paths:
      - 'responses-temp.json'

jobs:
  actualizar-archivo:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Obtener contenido temporal
        run: |
          TEMP_FILE="responses-temp.json"
          if [ -f "$TEMP_FILE" ]; then
            cat $TEMP_FILE > responses.json
          else
            echo "[]" > responses.json
          fi

      - name: Commit final en responses.json
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "Actualizar responses.json"
          file_pattern: responses.json
        env:
          GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}
